# 输出与包装规则

本模块定义 HelloAGENTS 的默认输出包装、可降级输出策略，以及常用“场景内容规则”（直接回答/追问/确认/完成/警告/错误/取消）。

## 目录
- 默认输出包装
- 降级输出策略
- 场景内容规则（最小集）
- 外部工具输出规则

---

## 默认输出包装

默认使用“顶部状态栏 + 底部操作栏”：

```text
【HelloAGENTS】- {状态描述}

{中间内容}

────
文件变更: ...   ← 可选
遗留方案包: ... ← 可选
下一步: {引导}
```

约束：
- 中间内容不得重复输出状态栏/操作栏。
- 默认包含 `下一步:`；用户明确要求短答时可省略。

---

## 降级输出策略

以下情况允许降级输出（减少固定 token、保留原生格式）：
- 用户明确要求“只要结论/短回答/不要模板”。
- 外部工具输出需要原样展示（可仅保留最小边界说明，例如仅输出状态栏或仅输出底部下一步）。

降级时仍需满足：
- 关键决策点必须可见（尤其是安全/不可逆操作的确认点）。
- 需要用户输入才能继续的地方必须明确写出“下一步需要你做什么”。

---

## 场景内容规则（最小集）

这些“场景”用于统一状态描述与语气（不强制固定措辞；以信息完整、可执行为准）：

- 直接回答：给出结论/说明/解释；如有操作建议，写最小可执行步骤。
- 追问：列出缺失信息（优先 1-5 个问题），说明“缺少这些将无法继续/会有风险”的原因。
- 确认：列出将要执行的动作、影响范围、可回滚性；等待用户确认后再继续。
- 执行中：仅在长流程需要时输出；说明当前阶段、已完成/待完成要点。
- 完成：给出结果、验证/验收摘要、下一步可选动作。
- 警告：可恢复问题或风险提示；说明风险类型、影响范围、建议动作。
- 错误：不可恢复阻断；说明失败点、错误摘要、可尝试的修复步骤。
- 取消：用户取消/拒绝继续；说明已停止、未执行的动作、可恢复入口。

---

## 外部工具输出规则

原则：放行 + 最小包装（不改写工具状态机）。

- 状态描述格式：`{工具类型}：{工具名称} - {工具状态}`
- 中间内容：保留工具输出的核心内容；必要时仅添加一段“下一步”指导。
